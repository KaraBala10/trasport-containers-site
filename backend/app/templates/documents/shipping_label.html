<!DOCTYPE html>
<html lang="{{ language }}" dir="{% if language == 'ar' %}rtl{% else %}ltr{% endif %}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Label - {{ parcel_index }}</title>
    <style>
      @page {
        size: 6in 4in;
        margin: 0;
    }
    
    body, .label-container {
        width: 6in;
        height: 4in;
    }
  
      * {
          box-sizing: border-box;
      }
  
      body {
          font-family: 'Arial', 'Helvetica', sans-serif;
          font-size: 11px;
          line-height: 1.4;
          color: #000;
          padding: 0;
          margin: 0;
          direction: ltr;
          text-align: left;
          -webkit-print-color-adjust: exact;
          print-color-adjust: exact;
      }
  
      .label-container {
          width: 100%;
          height: 100%;
          border: 1px solid #000;
          padding: 8px;
          display: flex;
          flex-direction: column;
          position: relative;
          background: #fff;
      }
  
      .header-section {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          margin-bottom: 4px;
          padding-bottom: 4px;
          border-bottom: 1px solid #000;
          gap: 4px;
      }
      
      .header-right {
          display: flex;
          flex-direction: column;
          align-items: flex-end;
          gap: 2px;
      }
      
      .from-section-header {
          padding: 2px 4px;
          border: 1px solid #000;
          border-radius: 2px;
          background: #fff;
          min-width: 80px;
          font-size: 8px;
      }
      
      .from-title {
          font-size: 8px;
          font-weight: bold;
          text-transform: uppercase;
          margin-bottom: 2px;
          border-bottom: 1px solid #000;
          padding-bottom: 1px;
      }
      
      .from-content {
          font-size: 7px;
          line-height: 1.3;
      }
  
      .logo-section {
          display: flex;
          align-items: center;
          gap: 6px;
      }
  
      .logo-section img {
          max-width: 45px;
          max-height: 22px;
          object-fit: contain;
      }
  
      .company-info {
          flex: 1;
      }
  
      .company-name {
          font-size: 14px;
          font-weight: bold;
          color: #000;
          letter-spacing: 0.3px;
          text-transform: uppercase;
      }
  
      .company-tagline {
          font-size: 9px;
          color: #444;
          font-weight: 600;
      }
  
      .qr-section {
          text-align: center;
          padding: 2px;
          border: 1px solid #000;
          border-radius: 2px;
          background: #fff;
      }
  
      .qr-section img {
          width: 35px;
          height: 35px;
          display: block;
          margin: 0 auto 2px;
      }
  
      .qr-label {
          font-size: 7px;
          font-weight: bold;
          color: #000;
          letter-spacing: 0.4px;
      }
  
      .barcode-section {
          text-align: center;
          padding: 2px;
          border: 1px solid #000;
          border-radius: 2px;
          background: #fff;
          margin-top: 2px;
      }
  
      .barcode-section img {
          max-width: 80px;
          height: auto;
          max-height: 20px;
          display: block;
          margin: 0 auto 1px;
      }
  
      .barcode-label {
          font-size: 7px;
          font-weight: bold;
          color: #000;
          letter-spacing: 0.4px;
      }
  
      .label-title {
          font-size: 14px;
          font-weight: bold;
          text-align: center;
          margin: 4px 0 6px;
          color: #000;
          letter-spacing: 1px;
          text-transform: uppercase;
      }
  
      .section {
          margin-bottom: 4px;
          padding: 4px 4px 3px 4px;
          border: 1px solid #d1d5db;
          border-radius: 2px;
          background: #fff;
      }
  
      .section-title {
          font-size: 10px;
          font-weight: bold;
          margin-bottom: 3px;
          text-transform: uppercase;
          color: #000;
          border-bottom: 1px solid #000;
          padding-bottom: 2px;
      }
  
      .field-row {
          display: flex;
          margin-bottom: 4px;
          font-size: 10px;
          align-items: baseline;
      }
  
      .field-label {
          font-weight: bold;
          min-width: 60px;
          margin-right: 4px;
          color: #111827;
          font-size: 10px;
      }
  
      .field-value {
          flex: 1;
          border-bottom: 1px solid #000;
          min-height: 18px;
          padding-top: 2px;
          padding-bottom: 1px;
          font-size: 10px;
          font-weight: 600;
          line-height: 1.5;
          white-space: normal;
          word-break: break-word;
      }
  
      .shipping-method {
          background: #000;
          color: #fff;
          padding: 3px 6px;
          border-radius: 2px;
          font-size: 11px;
          font-weight: bold;
          text-align: center;
          display: inline-block;
          width: 100%;
          text-transform: uppercase;
          letter-spacing: 0.5px;
      }
  
      .main-content {
          display: grid;
          grid-template-columns: 1fr;
          gap: 4px;
          flex: 1;
          min-height: 0;
      }
  
      .left-section {
          display: flex;
          flex-direction: column;
          gap: 3px;
          min-height: 0;
      }
  
      .section:last-of-type {
          margin-bottom: 0;
      }
  
      /* Parcel info as invoice-style table */
      .parcel-info {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          border: 1px solid #000;
          margin-top: 3px;
          margin-bottom: 2px;
      }
  
      .parcel-field {
          display: flex;
          flex-direction: column;
          padding: 2px 3px;
          border-right: 1px solid #000;
      }
  
      .parcel-field:last-child {
          border-right: none;
      }
  
      .parcel-label {
          font-weight: bold;
          margin-bottom: 2px;
          color: #000;
          font-size: 9px;
          text-transform: uppercase;
          letter-spacing: 0.3px;
      }
  
      .parcel-value {
          border-top: 1px solid #000;
          min-height: 18px;
          font-weight: 700;
          padding: 3px 0 1px;
          font-size: 10px;
          color: #111827;
          background: #fff;
          text-align: left;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
      }
  
      .route-badge {
          margin-top: 4px;
          padding: 3px 4px;
          font-size: 9px;
          border-top: 1px solid #d1d5db;
          text-transform: uppercase;
      }
  
      .route-badge::before {
          content: "Route: ";
          font-weight: bold;
      }
  
      .collection-center {
        padding: 4px;
        font-size: 8px;
        line-height: 1.3;
    }
    
    .center-title {
        font-size: 9px;
        margin-bottom: 2px;
        padding-bottom: 1px;
    }
    
    .collection-center div {
        margin-top: 2px;
    }
  
      .center-info {
          line-height: 1.4;
          margin-bottom: 3px;
      }
  
      .center-info strong {
          color: #000;
          font-size: 9px;
      }
  
      .collection-center strong {
          font-weight: 700;
      }
  
      @media print {
          body {
              margin: 0;
          }
          .label-container {
              border-width: 1px;
          }
      }
  </style>  
</head>
<body>
    <div class="label-container">
        <!-- Header with Logo -->
        <div class="header-section">
            <div class="logo-section">
                {% if company.logo_base64 %}
                <img src="data:image/png;base64,{{ company.logo_base64 }}" alt="Logo">
                {% endif %}
                <div class="company-info">
                    <div class="company-name">Medo-Freight EU</div>
                    <div class="company-tagline">Ship ¬∑ Route ¬∑ Deliver</div>
                </div>
            </div>
            <div class="header-right">
                {% if qr_code_base64 %}
                <div class="qr-section">
                    <img src="data:image/png;base64,{{ qr_code_base64 }}" alt="QR Code">
                    <div class="qr-label">TRACK</div>
                </div>
                {% endif %}
                {% if barcode_base64 %}
                <div class="barcode-section">
                    <img src="data:image/png;base64,{{ barcode_base64 }}" alt="Barcode">
                    <div class="barcode-label">TRACKING</div>
                </div>
                {% endif %}
                <!-- FROM Section in Header -->
                <div class="from-section-header">
                    <div class="from-title">FROM:</div>
                    <div class="from-content">
                        <strong>{{ shipment.sender_name }}</strong><br>
                        {{ shipment.sender_city }}<br>
                        {{ shipment.sender_phone }}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Title -->
        <div class="label-title">SHIPPING LABEL</div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="left-section">
                <!-- Tracking -->
                <div class="section">
                    <div class="field-row">
                        <span class="field-label">TRACKING:</span>
                        <span class="field-value">{{ shipment.shipment_number|default:"_________________" }}</span>
                    </div>
                </div>
                
                <!-- TO Section -->
                <div class="section">
                    <div class="section-title">TO:</div>
                    <div class="field-row">
                        <span class="field-label">Name:</span>
                        <span class="field-value">{{ shipment.receiver_name }}</span>
                    </div>
                    <div class="field-row">
                        <span class="field-label">Phone:</span>
                        <span class="field-value">{{ shipment.receiver_phone }}</span>
                    </div>
                    <div class="field-row">
                        <span class="field-label">City:</span>
                        <span class="field-value">{{ shipment.receiver_city }}</span>
                    </div>
                    <div class="field-row">
                        <span class="field-label">Address:</span>
                        <span class="field-value">{{ shipment.receiver_address }}</span>
                    </div>
                </div>
                
                <!-- Shipping Method -->
                <div class="section">
                    <div class="section-title">SHIPPING:</div>
                    <div class="shipping-method">LCL</div>
                </div>
                
                <!-- Parcel Info -->
                <div class="section">
                    <div class="section-title">PARCEL:</div>
                    <div class="parcel-info">
                        <div class="parcel-field">
                            <div class="parcel-label">Pkgs</div>
                            <div class="parcel-value">{{ parcel.repeat_count|default:1 }}</div>
                        </div>
                        <div class="parcel-field">
                            <div class="parcel-label">Weight</div>
                            <div class="parcel-value">{{ parcel.weight|default:0 }} kg</div>
                        </div>
                        <div class="parcel-field">
                            <div class="parcel-label">Volume</div>
                            <div class="parcel-value">{{ parcel.cbm|default:0 }} m¬≥</div>
                        </div>
                    </div>
                    <div class="route-badge" style="margin-top: 4px;">
                        Route: {% if shipment.direction == 'eu-sy' %}EU ‚Üí SY{% else %}SY ‚Üí EU{% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Collection Center - Full Width -->
            <div class="section">
                <div class="section-title">COLLECTION CENTER</div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; font-size: 8px; line-height: 1.4;">
                    <div>
                        <strong>Medo-b2b / Medo-Freight-EU</strong><br>
                        Ship, Route, Deliver<br><br>
                        <strong>CONTACT:</strong><br>
                        üìû 0031683083916<br>
                        ‚úâÔ∏è contact@medo-freight.eu
                    </div>
                    <div>
                        <strong>Small (&lt; 20 kg):</strong><br>
                        Eurobox Self Storage<br>
                        Bergen op Zoom<br>
                        Wattweg 5, 4622 RA<br>
                        Storage: 0220-0221
                    </div>
                    <div>
                        <strong>Large (50+ kg):</strong><br>
                        Meekrapweg 2<br>
                        4571 RX, Zeeland<br>
                        Axel, NL<br>
                        Storage: A2
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
